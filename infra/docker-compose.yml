version: "3.9"
services:
  orchestrator:
    build:
      context: ../backend/orchestrator
    ports:
      - "8000:8000"
    healthcheck:
      test: ["CMD", "curl", "-fsS", "http://localhost:8000/ready"]
      interval: 20s
      timeout: 3s
      retries: 3
    depends_on:
      - log_indexer

  log_indexer:
    build:
      context: ../backend/log_indexer
    ports:
      - "9000:9000"
    healthcheck:
      test: ["CMD", "curl", "-fsS", "http://localhost:9000/ready"]
      interval: 20s
      timeout: 3s
      retries: 3

networks: { default: {} }
